# NekiraReflectDynamic

## Overview

NekiraReflectDynamic focus on providing essential features for Dynamic Reflection.

## Linking

```cmake
target_link_libraries(Target PRIVATE NekiraReflectionLib::NekiraReflectDynamic)

target_include_directories(Target PRIVATE ${NekiraReflection_INCLUDE_DIRS})
```

## Interface

To use NekiraReflectDynamic, include the following header:

```c++
#include "NekiraReflect/DynamicReflect/Core/Core.hpp"
```

## Dynamic Reflection

`NekiraReflectTool` scans header files and automatically generates reflection information for dynamic reflection. For details, see: [NekiraReflectTool](/Documents/NekiraReflectTool/NekiraReflectTool.EN.MD)

### Reflection Macros

#### NCLASS(), NSTRUCT(), NENUM(), NFUNCTION(), NPROPERTY()

Reflection macros. `NekiraReflectTool` recognizes these macros and automatically registers dynamic reflection information. They correspond to: `class`, `struct`, `enum class`, `member function`, and `member variable`.

#### NEKIRA_REFLECT_BODY(ClassType)

To register members in the `Protected` and `Private` sections for dynamic reflection, add the `NEKIRA_REFLECT_BODY(ClassType)` macro (where `ClassType` includes the namespace qualification) inside the definition of `class` or `struct`, and include the corresponding `gen.hpp` header file in your header.

### Dynamic Reflection Registration

If you do not need to register members in the `Protected` and `Private` sections, you can simply use the reflection macros without adding the `NEKIRA_REFLECT_BODY(ClassType)` macro or the corresponding `gen.hpp` header file. The `gen.hpp` header file is generated by `NekiraReflectTool`, and its name is based on the scanned source header file. For example, if the source is `Test.h`, the generated file will be `Test.gen.hpp`.

You can explicitly include the `gen.hpp` file in your source header before it is generated (the file may not exist at first, but it will be generated during the build process before normal compilation proceeds).

### Typical Dynamic Reflection Registration (assuming registration of Protected and Private members)

```cpp
// Test.h

#include "NekiraReflect/DynamicReflect/Core/Core.hpp"
#include "Test.gen.hpp"

namespace Nekira::Test
{

class NCLASS() QualifiedClass
{
    NEKIRA_REFLECT_BODY(Nekira::Test::QualifiedClass)

public:
    NFUNCTION()
    void Func() {}

private:
    NPROPERTY()
    std::string Arg;
};

enum class NENUM() QualifiedEnum
{
    value1,
    value2
}

} // namespace Nekira::Test

struct NSTRUCT() NormalStruct
{
    NEKIRA_REFLECT_BODY(NormalStruct)

protected:
    NPROPERTY()
    float Data;

private:
    void NonReflectFunc() {}

    NFUNCTION()
    void ReflectFunc()
};

```
